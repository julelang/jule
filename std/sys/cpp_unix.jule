// Copyright 2025 The Jule Authors. All rights reserved.
// Use of this source code is governed by a BSD 3-Clause
// license that can be found in the LICENSE file.

// Deprecated: Use libSystem wrappers for macOS, use direct syscalls for Linux instead of libc wrappers.

use "std/integ/c"

extern use "<dirent.h>"

extern unsafe fn opendir(path: *c::Char): *extern.DIR
extern unsafe fn closedir(mut dir: *extern.DIR): int
extern unsafe fn readdir(mut dir: *extern.DIR): *unsafe

#typedef
extern struct DIR{}

// Calls C's opendir function.
unsafe fn Opendir(path: *byte): *unsafe { ret extern.opendir((*c::Char)(path)) }

// Calls C's readdir function.
unsafe fn Readdir(mut dir: *unsafe): *Dirent { ret (*Dirent)(extern.readdir((*extern.DIR)(dir))) }

// Calls C's closedir function.
unsafe fn Closedir(mut dir: *unsafe): int { ret extern.closedir((*extern.DIR)(dir)) }