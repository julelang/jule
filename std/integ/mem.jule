// Copyright 2025 The Jule Authors. All rights reserved.
// Use of this source code is governed by a BSD 3-Clause
// license that can be found in the LICENSE file.

use "std/internal/runtime"

// Returns unsafe pointer to the allocation of the type any.
// It may be handled like C's voidptr type.
// It does not ensure safety of the allocation,
// so x may be deallocated while memory pointer is still alive.
// Make sure the allocation will not be deallocated until unsafe pointer
// being unreachable, otherwise any memory access may lead SEGFAULT.
fn AnyToUnsafeptr(x: any): *unsafe {
	ret unsafe { (*runtime::DynamicType)(&x).Data.Ptr }
}