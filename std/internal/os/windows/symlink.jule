// Copyright 2025 The Jule Programming Language.
// Use of this source code is governed by a BSD 3-Clause
// license that can be found in the LICENSE file.

use "std/sys"

#typedef
extern struct FILE_ATTRIBUTE_TAG_INFO{}

extern type HANDLE: *unsafe
extern type DWORD: u32

extern type FILE_INFO_BY_HANDLE_CLASS: int

extern unsafe fn GetFileInformationByHandleEx(h: extern.HANDLE, infoClass: extern.FILE_INFO_BY_HANDLE_CLASS, fileInfo: *unsafe, bufferSize: extern.DWORD): bool

const FileAttributeTagInfo = 9

struct FILE_ATTRIBUTE_TAG_INFO {
	FileAttributes: u32
	ReparseTag:     u32
}

unsafe fn GetFileInformationByHandleEx(h: sys::Handle, infoClass: int, fileInfo: *unsafe, bufferSize: u32): bool {
	ret extern.GetFileInformationByHandleEx(extern.HANDLE(h), extern.FILE_INFO_BY_HANDLE_CLASS(infoClass), fileInfo, extern.DWORD(bufferSize))
}